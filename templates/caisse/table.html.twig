{#
  Logiciel de caisse pour restaurants
  Copyright (C) 2025 RevivalSoft
  
  Ce programme est un logiciel libre ; vous pouvez le redistribuer et/ou
  le modifier selon les termes de la Licence Publique Générale GNU publiée
  par la Free Software Foundation Version 3.
  
  Ce programme est distribué dans l'espoir qu'il sera utile,
  mais SANS AUCUNE GARANTIE ; sans même la garantie implicite de
  COMMERCIALISATION ou D’ADÉQUATION À UN BUT PARTICULIER. Voir la
  Licence Publique Générale GNU pour plus de détails.
  
  Vous devriez avoir reçu une copie de la Licence Publique Générale GNU
  avec ce programme ; si ce n'est pas le cas, voir
  https://www.gnu.org/licenses/
#}
{% extends 'base.html.twig' %}

{% block title %}Caisse - Tables
{% endblock %}

{% block body %}

	<div
		class="container my-4">

		{# Nom de la table sélectionnée #}
		<div id="table-name" class="text-center fw-bold fs-3 text-primary my-3"></div>

		{# Section tables #}
		<div id="tables-section" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3">
			{% for table in tables %}
				<div class="col d-flex">
					<button class="btn btn-outline-primary btn-table w-100 py-3 fs-5 align-self-stretch" data-id="{{ table.id }}">
						<span class="table-label">{{ table.nom }}</span>
					</button>
				</div>
			{% endfor %}
		</div>

		{# Section catégories #}
		<div
			id="categories-section" class="d-none mt-3">

			{# Bouton "Retour aux tables" au-dessus des catégories #}
			<div class="mb-3">
				<button class="btn btn-secondary w-100 py-2 fw-bold" id="back-to-tables">Retour aux tables</button>
			</div>

			{# Grille des catégories #}
			<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3">
				{% for categorie in categories %}
					<div class="col d-flex">
						<button class="btn btn-success btn-cat w-100 py-2 fw-bold text-white align-self-stretch" data-id="{{ categorie.id }}">
							{{ categorie.nom }}
						</button>
					</div>
				{% endfor %}
			</div>

		</div>

		{# Section produits par catégorie #}
		{% for categorie in categories %}
			<div id="cat-{{ categorie.id }}" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3 mb-3 d-none mt-3">
				{% for produit in categorie.produits %}
					<div class="col d-flex">
						<button class="btn btn-warning btn-produit w-100 py-2 fw-bold align-self-stretch" data-id="{{ produit.id }}" data-nom="{{ produit.nom }}" data-prixttc="{{ produit.prixTTC }}">
							{{ produit.nom }}<br>€
							{{ produit.prixTTC|number_format(2, ',', ' ') }}
						</button>
					</div>
				{% endfor %}
			</div>
		{% endfor %}

		{# Ticket #}
		<div id="ticket-container" class="mt-4 d-none">
			<h4>Ticket</h4>
			<div id="ticket" class="border p-3 mb-3 bg-light"></div>
			<button class="btn btn-primary w-100 py-3 fs-5" id="save-ticket-btn">Enregistrer la commande</button>
		</div>

	</div>

{% endblock %}
